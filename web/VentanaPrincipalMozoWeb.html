<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <script src="http://code.jquery.com/jquery-latest.min.js"></script>
        <script type="text/javascript">

            var vistaWeb = new EventSource("mozo?accion=new"); // Le digo new al servletMozoPrincipal

            vistaWeb.onerror = function (evento) {
                alert("Sin conexion con el servidor");
                vistaWeb.close();
                document.location = "/mozo/";
            };

            vistaWeb.addEventListener("mostrarMesas", function (evento) { // Evento que espera el listener de la vista
                document.getElementById("mesas").innerHTML = evento.data; // id del HTML donde se cargara la DATA
            }, false);
            vistaWeb.addEventListener("infoMesa", function (evento) { // Evento que espera el listener de la vista
                document.getElementById("seleccionada").innerHTML = evento.data; // id del HTML donde se cargara la DATA
            }, false);
            vistaWeb.addEventListener("listaClientes", function (evento) { // Evento que espera el listener de la vista
                document.getElementById("clientes").innerHTML = evento.data; // id del HTML donde se cargara la DATA
            }, false);
            vistaWeb.addEventListener("listarMozosLogueados", function (evento) { // Evento que espera el listener de la vista
                document.getElementById("mozos").innerHTML = evento.data; // id del HTML donde se cargara la DATA
            }, false);
            vistaWeb.addEventListener("timer", function (evento) { // Evento que espera el listener de la vista
                document.getElementById("lbltiempo").innerHTML = evento.data; // id del HTML donde se cargara la DATA
            }, false);
            vistaWeb.addEventListener("mensajeTrans", function (evento) { // Evento que espera el listener de la vista
                document.getElementById("mensajeTrans").innerHTML = evento.data; // id del HTML donde se cargara la DATA
            }, false);
            vistaWeb.addEventListener("listarPedidos", function (evento) { // Evento que espera el listener de la vista
                document.getElementById("pedidos").innerHTML = evento.data; // id del HTML donde se cargara la DATA
            }, false);
            vistaWeb.addEventListener("mostrarPedidosMesas", function (evento) { // Evento que espera el listener de la vista
                document.getElementById("pedidosMesa").innerHTML = evento.data; // id del HTML donde se cargara la DATA
            }, false);


            function abrirMesa() {

                var unaM = document.getElementById("lstMesasMozo").selectedIndex;
                $.get("mozo?accion=abrirMesa&mesa=" + unaM, function (data) {

                });
            };
            function cerrarMesa() {

                var unaM = document.getElementById("lstMesasMozo").selectedIndex;
                $.get("mozo?accion=cerrarMesa&mesa=" + unaM, function (data) {

                });
            };/*
            function asignarCliente() {
                var unC = document.getElementById("lstClientes").selectedIndex;
                $.get("mozo?accion=asignarCliente&cliente=" + unC, function (data) {

                });
            };*/
            function asignarCliente() {
                var unC = document.getElementById("idCliente").value;
                $.get("mozo?accion=asignarCliente&cliente=" + unC, function (data) {

                });
            };
            function aceptarTransferencia() {
                var res = document.getElementById("opcion").checked;
                $.get("mozo?accion=aceptarTransferencia&respuesta=" + res, function (data) {

                });
            };
            function transferir() {

                var unM = document.getElementById("lstMozos").selectedIndex;
                var unaM = document.getElementById("lstMesasMozo").selectedIndex;
                $.get("mozo?accion=transferir&mesa=" + unaM +"&mozo="+unM, function (data) {
                });
            };
            function agregarPedido() {
                var mesa = document.getElementById("lstMesasMozo").selectedIndex;
                var prod = document.getElementById("lstPedidos").selectedIndex;
                var cantidad = document.getElementById("cantidad").value;
                $.get("mozo?accion=agregarPedidoWeb&mesa=" + mesa+"&prod="+prod+"&cant="+cantidad, function (data) {

                });
            };
            
            
        </script>


                                    <!--PANEL PRINCIPAL MOZO -->
        <br><div>Mesas <br><span id="mesas" ><!--lstMesasMozo --></span></div>
        <br>
        <input type="button" value="Abrir Mesa" onclick="abrirMesa()">
        <br>
        <input type="button" value="Cerrar Mesa" onclick="cerrarMesa()">
        <br>
        
        <!--
        <input type="button" value="Agregar Pedido" onclick="agregarPedido()">
        
        <input type="button" value="Asignar Cliente" onclick="asignarCliente()">
        <br>
        --> 
        <br><div>Mesa Seleccionada: <br><span id="seleccionada" ></span></div>
        <br><div>Servico Mesa <br><span id="pedidosMesa" ><!--lstPedidosMesa --></span></div>
        
        
                                   <!--PANEL ASIGNAR CLIENTE -->
         
        <!--lstClientes -->                           
        <!--<br>
        <br><div>Clientes <br><span id="clientes" ></span></div>
        <br> -->
        
        <br><div>ingrese el id del cliente <br><input type="text" id="idCliente" ></div>
        <input type="button" value="Asignar Cliente" onclick="asignarCliente()">
        <br>       
                                    <!--PANEL ENVIAR TRANSFERENCIAS -->
        <br><div>Mozos logueados <br><span id="mozos" ><!--lstMozos --></span></div>
        <br>
        <br>
        <input type="button" value="Transferir" onclick="transferir()">
        <br>
        
        <br><div><br><span id="mensajeTrans" ></span></div>
        <br>
                        <!--PANEL ENVIAR TRANSFERENCIAS -->
        <br><div>Tiempo restante <br><span id="lbltiempo" ></span></div>
        <br>
        <input type="checkbox" id="opcion" name="opcion" value="aceptar">aceptar<br>
        <br>
        <input type="button" value="Aceptar Transferencia" onclick="aceptarTransferencia()">
        
        
                            <!--PANEL ENVIAR TRANSFERENCIAS -->
        <br><div>Agregar Pedido <br><span id="pedidos" ><!--lstPedidos --></span></div>
        <br>
        <br><div>Cantidad <br><input type="text" id="cantidad" ></div>
        <br>
        <input type="button" value="Pedidos" onclick="agregarPedido()">
        <br>
    </body>
</html>
